captainVersion: 4
services:
    $$cap_appname:
        volumes:
            - $$cap_appname-app-data:/opt/app
        restart: always
        caproverExtra:
            containerHttpPort: '3333'
            dockerfileLines:
                - FROM caprover/caprover-placeholder-app:latest
                - RUN echo 'http://dl-cdn.alpinelinux.org/alpine/v3.14/main' >> /etc/apk/repositories
                - RUN apk update
                - RUN apk upgrade
                - RUN apk add --no-cache bash
                - RUN apk add --no-cache mysql-client
                - RUN apk add --no-cache nano
                - RUN apk add --no-cache git
                - RUN apk add --no-cache nodejs=14.19.0-r0
                - RUN apk add --no-cache npm
                - RUN npm install --global yarn
                - RUN yarn global add pm2
                - RUN mkdir /opt/app
        environment:
            SERVER_PORT: 3333
            DATABASE_URL: 'postgresql://dbmasteruser:3C!4KDYV7&JAxmLSsX%]1g(eTfiXZ]+M@ls-3739bd3ea52cf83ef708ac3c6f346d0b40a9e925.ciebbplk1snp.us-east-1.rds.amazonaws.com:5432/postgres?schema=public&connect_timeout=0'

caproverOneClickApp:
    instructions:
        start: >-
            Ambiente NodeJS com: Yarn, Git, Nano e Alpine Linux 3.12
        end: >-
            Instalado $$cap_appname 
            displayName: Ambiente NODE
    isOfficial: true
    description: Ambiente NODE 14.19.0
    documentation: Equipe Elanto
